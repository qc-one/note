<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        
        // function defineReactive(data, key, value) {
        //     Object.defineProperty(data, key, {
        //         enumerable: true,
        //         configurable: true,
        //         get: function defineGet() {
        //             console.log(`get key: ${key} value: ${value}`)
        //             return value
        //         },
        //         set: function defineSet(newVal) {
        //             console.log(`set key: ${key} value: ${newVal}`)
        //             value = newVal
        //         }
        //     })
        // }
        // function observe(data) {
        //     Object.keys(data).forEach(function(key) {
        //         defineReactive(data, key, data[key])
        //     })
        // }
        // let arr = [1, 2, 3]
        // observe(arr)
        // arr[1] = 5
        // arr.push(9)
        // arr.length = 5
        // console.log(arr);


        // let arr = [1,2,3];
        let arr = 123
        Object.keys(arr).forEach(key => {
            let oldValue = arr[key]
            console.log(oldValue);
            Object.defineProperty(arr, key, {
                get() {
                    console.log('%c 调用get', 'color: green', key)
                    return oldValue
                },
                set(value) {
                    console.log('%c 调用set', 'color: blue', value)
                    oldValue = value
                }
            })
        })
        // Object.defineProperty(arr, undefined, {
        //     get() {
        //         console.log('%c 调用get', 'color: green', key)
        //         return oldValue
        //     },
        //     set(value) {
        //         console.log('%c 调用set', 'color: blue', value)
        //         oldValue = value
        //     }
        // })
        arr = 90
        console.log(arr);
        // arr.push('c') // 不触发
        // arr.length = 3 // 不触发
        // arr.splice(0,1)
        // arr[0] = 9
        // console.log(arr);


        // 原始对象
        // let data = {
        //     name: 'Jane',
        //     age: 21,
        //     price: {
        //         a: 123
        //     }
        // }
        let data = 123
        // Object.keys(data).forEach(key => {
        //     let oldValue = data[key]
        //     Object.defineProperty(data, key, {
        //         get() {
        //             console.log('%c 调用get', 'color: green') // 这里为了控制台更明显看出调用，使用了不同颜色进行区分
        //             return oldValue
        //         },
        //         set(value) {
        //             console.log('%c 调用set', 'color: blue')
        //             oldValue = value
        //         }
        //     })
        // })
        // console.log(data.name) // Jane
        // data.name = 'Jian'
        // console.log(data.name) // Jian
        // delete data.age
        // data.price = 1000
        // data = {a: 123}
        // data.a = 345
        // console.log(data)

        // console.log(Proxy);
        // const proxyData = new Proxy(data, {
        //     get(target, prop) {
        //         console.log('%c 调用get', 'color: green')
        //         return Reflect.get(target, prop)
        //     },
        //     set(target, prop, value) {
        //         console.log('%c 调用set', 'color: blue')
        //         return Reflect.set(target, prop, value) // Reflect通过代理对象更改目标对象的属性值
        //     },
        //     deleteProperty(target, prop) {
        //         console.log('%c 调用delete', 'color: red')
        //         Reflect.deleteProperty(target, prop)
        //         return true
        //     }
        // })
        // console.log('proxyData.name -> ', proxyData.name) // Jane
        // console.log('data.name -> ', data.name) // Jane
        // proxyData.name = 'Jian'
        // proxyData.price = 1000
        // console.log('proxyData.name -> ', proxyData.name) // Jian
        // console.log('data.name -> ', data.name) // Jian 
        // delete proxyData.name
        // console.log(proxyData, data);
        // data.price.a = 234
        // console.log(data);



        
        // let People = new Proxy({
        //     _name: 'people',
        //     get name() {
        //         return this._name
        //     }
        // }, {
        //     get: function (target, prop, receiver) {
        //         return target[prop]
        //     }
        // })
        // let Man = { _name: 'man' }
        // Man.__proto__ = People // Man继承People
        // console.log(Man._name) // man 这个name是打印的Man自身的name，正常
        // console.log(Man.name) // prople 
    </script>
</body>
</html>